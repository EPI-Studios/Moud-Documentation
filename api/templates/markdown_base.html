<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Moud Docs</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hint.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
    .api-card {
        border-radius: 8px;
        margin: 20px 0;
        background: var(--bg-card);
        overflow: hidden;
        border: 1px solid var(--border-subtle); 
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        transition: border-color 0.2s ease-out, transform 0.2s ease-out, box-shadow 0.2s ease-out;
    }

    .api-card:hover {
        border-color: var(--text-muted); 
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Tighter, less fuzzy shadow */
    }

    .api-card summary {
        list-style: none;
        padding: 14px 18px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: transparent; 
        user-select: none;
        font-weight: 600;
        color: var(--text-main);
        font-family: var(--font-mono);
        font-size: 0.95rem;
        transition: background 0.15s ease, color 0.15s ease;
    }

    .api-card summary:hover {
        background: rgba(125, 125, 125, 0.05); 
    }

    .api-card summary::-webkit-details-marker {
        display: none;
    }

    .api-card summary::after {
        content: '›';
        font-size: 1.4rem;
        color: var(--text-dim);
        transition: transform 0.2s ease-out, color 0.2s ease;
    }

    .api-card[open] summary::after {
        transform: rotate(90deg);
        color: var(--accent-blue);
    }

    .api-card[open] summary {
        border-bottom: 1px solid var(--border-subtle);
        background: rgba(125, 125, 125, 0.02);
    }

    .api-content {
        padding: 0;
    }

    .api-signature-box {
        background: var(--bg-code);
        color: var(--text-muted);
        padding: 14px 18px;
        font-family: var(--font-mono);
        font-size: 0.875rem;
        overflow-x: auto;
        border-bottom: 1px solid var(--border-subtle);
    }

    .api-signature-label {
        color: #c678dd;
        user-select: none;
        margin-right: 8px;
        font-weight: 500;
    }

    .api-prop-list {
        display: grid;
        grid-template-columns: 1fr;
    }

    .api-prop-row {
        display: grid;
        grid-template-columns: 140px 1fr; 
        border-bottom: 1px solid var(--border-subtle);
    }

    .api-prop-row:last-child {
        border-bottom: none;
    }

    .api-prop-label {
        padding: 14px 18px;
        font-weight: 600;
        font-size: 0.85rem;
        color: var(--text-dim);
        background: rgba(127, 127, 127, 0.03); 
        border-right: 1px solid var(--border-subtle);
    }

    .api-prop-value {
        padding: 14px 18px;
        color: var(--text-main);
        line-height: 1.6;
    }

    .light-theme .api-card {
        background: #fff;
        border-color: #e5e7eb;
    }
    
    .light-theme .api-card:hover {
        border-color: #d1d5db;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    .light-theme .api-card summary,
    .light-theme .api-prop-label {
        background: #f9fafb;
    }

    .light-theme .api-card summary:hover {
        background: #f3f4f6;
    }

    @media (max-width: 600px) {
        .api-prop-row {
            grid-template-columns: 1fr;
        }
        .api-prop-label {
            border-right: none;
            border-bottom: 1px solid var(--border-subtle);
            padding: 10px 16px;
        }
        .api-prop-value {
            padding: 10px 16px 16px;
        }
    }
    </style>
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.classList.add('light-theme');
            }
        })();
    </script>
</head>
<body>

    <button class="mobile-toggle" id="mobile-toggle" aria-label="Toggle Menu">
        <i data-lucide="menu"></i>
    </button>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="header-top">
                <a href="/" class="logo">
                    <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 788.3 238.63" role="img">
                        <path fill="currentColor" d="M225.32,143.16v20.81c0,8.55-4.56,16.46-11.96,20.75-28.83,17.97-57.66,35.94-86.49,53.91v-59.25l44.45-25.76-44.45-25.46v-55.19c28.79,16.46,57.59,32.92,86.38,49.38,7.46,4.27,12.07,12.21,12.07,20.81Z"/>
                        <path fill="currentColor" d="M224.42,56.21c.3,18.74.6,37.48.91,56.21-32.81-19.66-65.63-39.31-98.44-58.97V0c32.51,18.74,65.02,37.48,97.54,56.21Z"/>
                        <path fill="currentColor" d="M106.53,0C76.35,17.69,46.17,35.37,15.98,53.06,6.08,58.86,0,69.48,0,80.95v81.74c0,11.97,6.61,22.95,17.18,28.56,29.78,15.8,59.57,31.59,89.35,47.39V0Z"/>
                        <g fill="currentColor">
                            <path d="M415.11,60.03v111.07h-36.85v-44.54l-12.93,44.54h-31.12l-12.93-44.54v44.54h-36.84V60.03h42.53l22.8,68.21,22.8-68.21h42.53Z"/>
                            <path d="M545.86,115.56c0,42.14-31.34,58.23-60.93,58.23s-60.93-16.08-60.93-58.23,31.34-58.23,60.93-58.23,60.93,16.08,60.93,58.23ZM509.6,115.56c0-20.64-13.16-27.12-24.66-27.12s-24.66,6.48-24.66,27.12,13.16,27.12,24.66,27.12,24.66-6.49,24.66-27.12Z"/>
                            <path d="M664.86,60.03v66.79c0,25.99-14.33,46.94-55.82,46.94s-55.82-20.94-55.82-46.94V60.03h36.85v63.73c0,15.58,10.92,18.89,18.97,18.89s18.97-3.31,18.97-18.89v-63.73h36.85Z"/>
                            <path d="M788.3,115.61c0,47.12-37.14,55.49-61.1,55.49h-50.94V60.03h50.94c23.96,0,61.1,8.46,61.1,55.58ZM750.35,115.61c0-21.03-15.97-24.47-29.86-24.47h-7.38v48.85h7.38c13.9,0,29.86-3.35,29.86-24.38Z"/>
                        </g>
                    </svg>
                </a>
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle Theme">
                    <i data-lucide="moon" class="theme-icon-moon"></i>
                    <i data-lucide="sun" class="theme-icon-sun" style="display:none;"></i>
                </button>
            </div>
            
            <div class="search-wrapper">
                <i data-lucide="search" class="search-icon"></i>
                <input type="text" class="search-input" placeholder="Search..." id="search-input">
            </div>
        </div>

        <nav class="nav-section" id="doc-list">
            {% for section_name, section_data in documents_by_category.items() %}
                <div class="nav-label">{{ section_name }}</div>
                <ul style="list-style: none; padding: 0; margin: 0;">
                {% for doc in section_data.documents|sort(attribute='order') %}
                <li>
                    <a href="/{{ doc.filename }}" class="nav-link {% if doc.filename == doc_name %}active{% endif %}">
                        {{ doc.title }}
                    </a>
                </li>
                {% endfor %}
                </ul>
                <div style="height: 20px;"></div> 
            {% endfor %}
        </nav>
    </aside>

    <main class="main">
        <div class="breadcrumbs">
            <a href="/">Docs</a>
            <span>/</span>
            <span>{{ title }}</span>
        </div>

        <h1>{{ title }}</h1>
        
        <div class="badges">
        </div>

        <article class="md-content" id="content-area">
            {{ content|safe }}
        </article>

        <div class="doc-footer">
            <div class="doc-actions">
                <a href="{{ github_edit_url }}" target="_blank" class="action-link">
                    <i data-lucide="edit-2"></i> Edit this page on GitHub
                </a>
                <div class="last-updated">
                    {% if versions %}
                    Last updated on {{ versions[0].date }}
                    {% endif %}
                </div>
            </div>
            
            {% if contributors %}
            <div class="contributors">
                <span class="contributors-label">Contributors</span>
                <div class="avatar-group">
                    {% for contributor in contributors %}
                    <a href="https://github.com/{{ contributor.username }}" target="_blank" class="avatar hint--top" aria-label="{{ contributor.name }}">
                        <img src="https://github.com/{{ contributor.username }}.png?size=64" alt="{{ contributor.name }}">
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <div style="padding-top: 20px; display: flex; justify-content: space-between;">
            {% if prev_doc %}
            <a href="/{{ prev_doc.filename }}" style="text-decoration: none; color: var(--text-muted);">
                <div style="font-size: 0.8rem;">Previous</div>
                <div style="color: var(--accent-blue);">← {{ prev_doc.title }}</div>
            </a>
            {% else %}
            <div></div>
            {% endif %}
            
            {% if next_doc %}
            <a href="/{{ next_doc.filename }}" style="text-align: right; text-decoration: none; color: var(--text-muted);">
                <div style="font-size: 0.8rem;">Next</div>
                <div style="color: var(--accent-blue);">{{ next_doc.title }} →</div>
            </a>
            {% endif %}
        </div>
    </main>

    <aside class="toc">
        <div class="toc-label">ON THIS PAGE</div>
        <ul class="toc-list" id="toc-list">
        </ul>
    </aside>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mdoc-page.js') }}"></script>
    <script src="{{ url_for('static', filename='js/glsl-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/desmos-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mermaid-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/geogebra-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/p5js-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mdoc-nav.js') }}"></script>
    <script>
        window.mdocInitPage?.();
    </script>
</body>
</html>
